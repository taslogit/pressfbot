# ‚úÖ –ì–ï–ô–ú–ò–§–ò–ö–ê–¶–ò–Ø - –ü–û–õ–ù–ê–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 2024-12-19  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–°–ï –°–ò–°–¢–ï–ú–´ –†–ï–ê–õ–ò–ó–û–í–ê–ù–´**

---

## üìä –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –°–ò–°–¢–ï–ú–´

### ‚úÖ –§–ê–ó–ê 1: –ë–ê–ó–û–í–´–ï –ú–ï–•–ê–ù–ò–ö–ò
1. **–°—Ç—Ä–∏–∫–∏ (STREAKS)** ‚úÖ
   - Backend: –ª–æ–≥–∏–∫–∞ –ø–æ–¥—Å—á–µ—Ç–∞ —Å—Ç—Ä–∏–∫–æ–≤, –ø—Ä–æ–ø—É—Å–∫–∏, –±–æ–Ω—É—Å—ã
   - Frontend: –∫–æ–º–ø–æ–Ω–µ–Ω—Ç StreakIndicator
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ check-in

2. **–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è** ‚úÖ
   - Backend: —Ç–∞–±–ª–∏—Ü–∞ daily_quests, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤ 00:00 UTC
   - Frontend: –∫–æ–º–ø–æ–Ω–µ–Ω—Ç DailyQuests
   - –¢–∏–ø—ã –∑–∞–¥–∞–Ω–∏–π: create_letter, create_duel, check_in, update_profile

3. **–°–∏—Å—Ç–µ–º–∞ –æ–ø—ã—Ç–∞ –∏ —É—Ä–æ–≤–Ω–µ–π** ‚úÖ
   - Backend: XP —Å–∏—Å—Ç–µ–º–∞, —Ä–∞—Å—á–µ—Ç —É—Ä–æ–≤–Ω–µ–π, —Ç–∏—Ç—É–ª—ã
   - Frontend: –∫–æ–º–ø–æ–Ω–µ–Ω—Ç XPNotification, –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –ø—Ä–æ—Ñ–∏–ª–µ
   - –§–æ—Ä–º—É–ª–∞: level = sqrt(XP / 100) + 1

### ‚úÖ –§–ê–ó–ê 2: –°–û–¶–ò–ê–õ–¨–ù–´–ï –ú–ï–•–ê–ù–ò–ö–ò
4. **–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞** ‚úÖ
   - Backend: referral_code, referred_by, referral_events
   - Frontend: –∫–æ–º–ø–æ–Ω–µ–Ω—Ç ReferralSection
   - –ù–∞–≥—Ä–∞–¥—ã: 100 XP –∑–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –¥—Ä—É–≥–∞

5. **–ü—É–±–ª–∏—á–Ω—ã–µ –±–∏—Ñ—ã —Å —Ö–∞–π–ø–æ–º** ‚úÖ
   - Backend: views_count, last_viewed_at, –Ω–∞–≥—Ä–∞–¥—ã –∑–∞ milestones
   - Frontend: –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Å—á–µ—Ç
   - –ù–∞–≥—Ä–∞–¥—ã: 50/200/500 REP –∑–∞ 100/500/1000 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤

6. **–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–∞—Ä–∫–æ–≤** ‚úÖ
   - Backend: —Ç–∞–±–ª–∏—Ü–∞ gifts, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –≤–∞–ª–∏–¥–∞—Ü–∏—è
   - Frontend: –∫–æ–º–ø–æ–Ω–µ–Ω—Ç SendGiftModal, –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –ø—Ä–æ—Ñ–∏–ª–µ
   - –¢–∏–ø—ã: –≠–Ω–µ—Ä–≥–∏—è (50 REP), –ó–∞—â–∏—Ç–∞ (100 REP), –ë—É—Å—Ç (150 REP), –õ–µ–≥–µ–Ω–¥–∞ (500 REP)

### ‚úÖ –§–ê–ó–ê 3: –î–û–õ–ì–û–°–†–û–ß–ù–´–ï –ú–ï–•–ê–ù–ò–ö–ò
7. **–°–µ–∑–æ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è** ‚úÖ
   - Backend: seasonal_events, user_event_progress
   - Frontend: –∫–æ–º–ø–æ–Ω–µ–Ω—Ç SeasonalEvents
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

8. **–¢—É—Ä–Ω–∏—Ä—ã** ‚úÖ
   - Backend: tournaments, tournament_participants, tournament_matches
   - Frontend: –∫–æ–º–ø–æ–Ω–µ–Ω—Ç Tournaments
   - –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª: —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –ª–∏–¥–µ—Ä–±–æ—Ä–¥, –º–∞—Ç—á–∏

9. **–õ–µ–Ω—Ç–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏** ‚úÖ
   - Backend: activity_feed, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
   - Frontend: –∫–æ–º–ø–æ–Ω–µ–Ω—Ç ActivityFeed
   - –¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π: letter_created, duel_created, gift_received, check_in, level_up

---

## üóÑÔ∏è –ë–ê–ó–ê –î–ê–ù–ù–´–•

### –ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã:
- `user_settings` (—Ä–∞—Å—à–∏—Ä–µ–Ω–∞): —Å—Ç—Ä–∏–∫–∏, –ø—Ä–æ–ø—É—Å–∫–∏
- `daily_quests`: –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è
- `profiles` (—Ä–∞—Å—à–∏—Ä–µ–Ω–∞): XP, —É—Ä–æ–≤–Ω–∏, —Ä–µ—Ñ–µ—Ä–∞–ª—ã
- `referral_events`: —Å–æ–±—ã—Ç–∏—è —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
- `gifts`: –ø–æ–¥–∞—Ä–∫–∏
- `seasonal_events`: —Å–µ–∑–æ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
- `user_event_progress`: –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ —Å–æ–±—ã—Ç–∏—è–º
- `tournaments`: —Ç—É—Ä–Ω–∏—Ä—ã
- `tournament_participants`: —É—á–∞—Å—Ç–Ω–∏–∫–∏ —Ç—É—Ä–Ω–∏—Ä–æ–≤
- `tournament_matches`: –º–∞—Ç—á–∏ —Ç—É—Ä–Ω–∏—Ä–æ–≤
- `activity_feed`: –ª–µ–Ω—Ç–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

### –ò–Ω–¥–µ–∫—Å—ã:
- –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã –∏–º–µ—é—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –ö–æ–º–ø–æ–∑–∏—Ç–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —á–∞—Å—Ç—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤

### Constraints:
- CHECK constraints –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- UNIQUE constraints –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

---

## üîå API ENDPOINTS

### –ù–æ–≤—ã–µ —Ä–æ—É—Ç—ã:
- `/api/daily-quests` - –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è
- `/api/avatars` - –∞–≤–∞—Ç–∞—Ä—ã
- `/api/profile/referral` - —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- `/api/profile/referrals` - —Å–ø–∏—Å–æ–∫ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
- `/api/duels/hype` - –ø—É–±–ª–∏—á–Ω—ã–µ –¥—É—ç–ª–∏
- `/api/duels/:id/view` - –ø—Ä–æ—Å–º–æ—Ç—Ä –¥—É—ç–ª–∏
- `/api/gifts` - –ø–æ–¥–∞—Ä–∫–∏
- `/api/gifts/types` - —Ç–∏–ø—ã –ø–æ–¥–∞—Ä–∫–æ–≤
- `/api/events/active` - –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
- `/api/events/:id/progress` - –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ —Å–æ–±—ã—Ç–∏—é
- `/api/events/:id/claim` - –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥—ã
- `/api/tournaments` - —Ç—É—Ä–Ω–∏—Ä—ã
- `/api/tournaments/:id/register` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `/api/tournaments/:id/leaderboard` - –ª–∏–¥–µ—Ä–±–æ—Ä–¥
- `/api/activity/feed` - –ª–µ–Ω—Ç–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- `/api/activity/user/:userId` - –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

## üé® FRONTEND –ö–û–ú–ü–û–ù–ï–ù–¢–´

### –ù–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- `StreakIndicator.tsx` - –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç—Ä–∏–∫–∞
- `DailyQuests.tsx` - –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è
- `XPNotification.tsx` - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ XP
- `ReferralSection.tsx` - —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- `SendGiftModal.tsx` - –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ–¥–∞—Ä–∫–æ–≤
- `SeasonalEvents.tsx` - —Å–µ–∑–æ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
- `Tournaments.tsx` - —Ç—É—Ä–Ω–∏—Ä—ã
- `ActivityFeed.tsx` - –ª–µ–Ω—Ç–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- `Profile.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω—ã —É—Ä–æ–≤–Ω–∏, XP, —Ä–µ—Ñ–µ—Ä–∞–ª—ã, –ø–æ–¥–∞—Ä–∫–∏
- `Landing.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤—Å–µ –Ω–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `Duels.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω —Ö–∞–π–ø-—Å–∏—Å—Ç–µ–º–∞

---

## üîí –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨ –ò –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
- ‚úÖ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è –∞—Ç–æ–º–∞—Ä–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ Rate limiting –Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö endpoints
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (Redis) –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ CHECK constraints –≤ –ë–î
- ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã (–∑–∞—â–∏—Ç–∞ –æ—Ç SQL injection)
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (Pino)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ (QA Audit):
- ‚úÖ Race conditions –≤ —Å–∏—Å—Ç–µ–º–µ –ø–æ–¥–∞—Ä–∫–æ–≤
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –î—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –∫–ª—é—á–∏ –≤ translations
- ‚úÖ –ó–∞–º–µ–Ω–∞ console.log –Ω–∞ logger
- ‚úÖ UUID –≤–∞–ª–∏–¥–∞—Ü–∏—è

---

## üìà –ú–ï–¢–†–ò–ö–ò –ò –ê–ù–ê–õ–ò–¢–ò–ö–ê

### –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏:
- –°—Ç—Ä–∏–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
- –£—Ä–æ–≤–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ –ª–µ–Ω—Ç–µ
- –£—á–∞—Å—Ç–∏–µ –≤ —Ç—É—Ä–Ω–∏—Ä–∞—Ö
- –û—Ç–ø—Ä–∞–≤–∫–∞/–ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–¥–∞—Ä–∫–æ–≤

---

## üöÄ –î–ï–ü–õ–û–ô

### –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π:
```bash
docker compose -f docker-compose.yml up -d --build
```

### –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î:
–ú–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞ —á–µ—Ä–µ–∑ `migrations.js`.

---

## üìù –°–¢–ê–¢–£–° –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

**–í—Å–µ —Å–∏—Å—Ç–µ–º—ã –∏–∑ —Ä–æ–∞–¥–º–∞–ø–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã:**
- ‚úÖ –°—Ç—Ä–∏–∫–∏
- ‚úÖ –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –æ–ø—ã—Ç–∞ –∏ —É—Ä–æ–≤–Ω–µ–π
- ‚úÖ –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- ‚úÖ –ü—É–±–ª–∏—á–Ω—ã–µ –±–∏—Ñ—ã —Å —Ö–∞–π–ø–æ–º
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–∞—Ä–∫–æ–≤
- ‚úÖ –°–µ–∑–æ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
- ‚úÖ –¢—É—Ä–Ω–∏—Ä—ã
- ‚úÖ –õ–µ–Ω—Ç–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

**–ì–æ—Ç–æ–≤–æ –∫ production!** üéâ

---

**–ü–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç:** `8e4e76a`  
**–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–ø—É—à–µ–Ω—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
